<!doctype html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NousSense Lab â€” interfaz natural con reconocimiento de voz, sÃ­ntesis de habla y visiÃ³n por cÃ¡mara con MediaPipe.">
  <meta name="theme-color" content="#2f3437">
  <title>NousSense Lab Â· Voz y CÃ¡mara</title>
  <link rel="stylesheet" href="assets/styles.css">
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
</head>
<body>
  <main class="shell">
    <section class="panel header">
      <div>
        <h1>NousSense Lab</h1>
        <p>Interfaz natural: reconocimiento de voz + sÃ­ntesis + cÃ¡mara con detecciÃ³n de manos/cara y persistencia en IndexedDB.</p>
      </div>
      <div id="assistantState" class="badge">Asistente inactivo</div>
    </section>

    <section class="grid-two">
      <article class="panel">
        <h2>Control de voz</h2>
        <div class="actions">
          <button id="listenBtn" aria-label="Iniciar reconocimiento de voz">ğŸ™ï¸ Escuchar</button>
          <button id="stopListenBtn" class="secondary" aria-label="Detener reconocimiento de voz">Detener</button>
        </div>
        <label>Texto reconocido
          <textarea id="recognizedText" rows="3" placeholder="AquÃ­ aparecerÃ¡ la frase reconocida..."></textarea>
        </label>
        <label>Respuesta hablada
          <input id="speakText" placeholder="Escribe y pulsa hablar o usa comandos de voz">
        </label>
        <div class="actions">
          <button id="speakBtn" class="secondary" aria-label="Sintetizar texto a voz">ğŸ”Š Hablar</button>
          <button id="stopSpeakBtn" class="secondary" aria-label="Silenciar sÃ­ntesis de voz">Silenciar</button>
        </div>

        <h3>Comandos de voz soportados</h3>
        <ul class="commands">
          <li><code>modo manos</code> / <code>modo cara</code> / <code>modo normal</code></li>
          <li><code>iniciar cÃ¡mara</code> / <code>detener cÃ¡mara</code></li>
          <li><code>capturar</code> (guarda imagen en BD local)</li>
          <li><code>guardar nota ...</code> (ej: guardar nota revisar mediapipe)</li>
          <li><code>leer notas</code> / <code>eliminar notas</code></li>
        </ul>
      </article>

      <article class="panel">
        <h2>VisiÃ³n por cÃ¡mara</h2>
        <div class="actions">
          <button id="startCamBtn" aria-label="Iniciar cÃ¡mara">ğŸ“· Iniciar cÃ¡mara</button>
          <button id="stopCamBtn" class="secondary" aria-label="Apagar cÃ¡mara">Apagar cÃ¡mara</button>
        </div>
        <div class="row">
          <label>Modo de detecciÃ³n
            <select id="modeSelect">
              <option value="none">Normal</option>
              <option value="hands">Manos</option>
              <option value="face">Cara</option>
            </select>
          </label>
          <label>Ãšltimo estado
            <input id="visionStatus" readonly value="Sin iniciar">
          </label>
        </div>
        <video id="inputVideo" autoplay playsinline muted hidden></video>
        <canvas id="outputCanvas" width="640" height="480"></canvas>
      </article>
    </section>

    <section class="grid-two">
      <article class="panel">
        <h2>Notas y memoria (IndexedDB)</h2>
        <div class="actions">
          <button id="reloadDataBtn" class="secondary">Recargar</button>
          <button id="clearHistoryBtn" class="secondary">Vaciar historial</button>
        </div>
        <div id="notesList" class="list"></div>
      </article>

      <article class="panel">
        <h2>Historial de comandos y eventos</h2>
        <div id="historyList" class="list"></div>
      </article>
    </section>

    <section class="panel">
      <h2>Capturas guardadas</h2>
      <div id="capturesGrid" class="captures"></div>
    </section>
  </main>

  <script type="module" src="assets/app.js"></script>
  <noscript><p style="text-align:center;padding:2rem;">NousSense Lab requiere JavaScript habilitado.</p></noscript>
</body>
</html>
